{"version":3,"sources":["scripts/mobx/shopcar.js","scripts/components/foot/index.js","scripts/components/afoot/index.js","scripts/views/main/index.js","utils/msg.js","utils/axios.js","utils/index.js"],"names":["Shopcar","carTotal","this","carList","forEach","item","count","carNum","checked","total","good","price","quan","newVal","map","observable","action","url","a","async","axios","get","res","data","result","post","then","filter","goodId","flag","computed","foots","txt","path","name","icon","Component","Afoot","observer","state","selectedTab","hash","window","location","console","log","tab","split","setState","shopcar","className","unselectedTintColor","tintColor","barTintColor","foot","i","Item","title","key","style","width","height","selectedIcon","selected","badge","length","onPress","history","push","data-seed","contextTypes","PropTypes","object","Main","props","component","LazyLoad","render","to","People","names","age","hobby","score","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","sessionStorage","error","offline","Promise","reject","response","code","type","createHashHistory"],"mappings":"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","file":"static/js/17.7d65f53f.chunk.js","sourcesContent":["import {observable, action, computed, autorun} from  \"mobx\"\r\nimport {axios} from \"&\"\r\n\r\nclass Shopcar {\r\n    @observable carList = [] ;  // 购物车数据 \r\n   // @observable carNum = 10;     // 购物车选中数量 \r\n    //@observable carTotal = \"\";   // 购物车总数量 \r\n\r\n    @action getCarList = async (url )  => {\r\n        const res = await axios.get(url);\r\n        this.carList = res.data.result ;\r\n    }\r\n    @action delSelect = () => {\r\n        axios.post(\"/react/delSelect\").then(res=>{\r\n            this.carList=this.carList.filter(item=>!item.checked)\r\n        })\r\n           \r\n        }\r\n\r\n    @action changeOneCount =  (goodId,flag )  => {\r\n     \r\n            \r\n            axios.post(\"/react/changeCount\",{\r\n                goodId,\r\n                flag\r\n            }).then(res=>{\r\n                this.carList = this.carList.map((item)=>{\r\n                    if(item.goodId==goodId){\r\n                        item.count+=flag?1:-1\r\n                    }\r\n                    return item;\r\n                });\r\n            })\r\n     \r\n    }\r\n\r\n    @action changeOneCountNum =  (goodId,count )  => {\r\n        axios.post(\"/react/changeCount\",{\r\n            goodId,\r\n            count\r\n        }).then(res=>{\r\n        this.carList = this.carList.map((item)=>{\r\n            if(item.goodId==goodId){\r\n                item.count=count*1\r\n            }\r\n            return item;\r\n        });\r\n    })\r\n \r\n}\r\n\r\n\r\n\r\n\r\n\r\n    @computed get carTotal(){\r\n        var carTotal=0;\r\n        this.carList.forEach((item)=>{\r\n            carTotal+=item.count;\r\n        })\r\n        return carTotal\r\n    }\r\n\r\n    @action changeOneChecked =  (checked,goodId )  => {\r\n        axios.post(\"/react/changeChecked\",{\r\n            checked,\r\n            goodId\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId==goodId){\r\n                    item.checked=checked\r\n                }\r\n                return item;\r\n            });\r\n        }) \r\n    }\r\n\r\n\r\n    @computed get carNum(){\r\n        var carNum=0;\r\n        this.carList.forEach((item)=>{\r\n            if(item.checked){\r\n                carNum+=item.count;\r\n            }\r\n        })\r\n        return carNum\r\n    }\r\n\r\n    @computed get total(){\r\n        var total=0;\r\n        this.carList.forEach((item)=>{\r\n            if(item.checked){\r\n                total+=item.count*item.good.price;\r\n            }\r\n        })\r\n        return total\r\n    }\r\n\r\n    @computed get quan(){\r\n        var quan=true;\r\n        this.carList.forEach((item)=>{\r\n            if(!item.checked){\r\n                quan=false\r\n            }\r\n        })\r\n        return quan\r\n    }\r\n\r\n     set quan(newVal){\r\n        \r\n        this.carList=this.carList.map((item)=>{\r\n            item.checked=newVal;\r\n            return item\r\n        })\r\n    }\r\n\r\n    @action changeQuan=checked=>{\r\n        axios.post(\"/react/changeChecked\",{\r\n            checked,\r\n        }).then(res=>{\r\n            this.quan=checked\r\n        }) \r\n        \r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default new Shopcar()","\r\nimport \"./index.scss\";\r\nimport React,{Component} from \"react\";\r\nimport {\r\n    NavLink\r\n}  from \"react-router-dom\"\r\nimport {Badge} from \"antd-mobile\"\r\n\r\nexport const foots = [\r\n    {txt:\"首页\",path:\"/main/home\",name:\"home\",icon:\"icon-dianying\"},\r\n    {txt:\"商品\",path:\"/main/classify\",name:\"classify\",icon:\"icon-yingyuan\"},\r\n    {txt:\"购物车\",path:\"/main/cart\",name:\"cart\",icon:\"icon-gouwuche1\"},\r\n    {txt:\"我\",path:\"/main/mine\",name:\"mine\",icon:\"icon-tubiaozhizuomoban\"}\r\n];\r\n\r\n\r\nexport class Foot extends Component{\r\n    \r\n    state = {\r\n        foots,\r\n        active:2\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log(\"mount\");\r\n        this.setState({\r\n            active:localStorage.active\r\n        })\r\n    }\r\n\r\n    handleChangeActive=(index)=>{\r\n        console.log(index);\r\n        localStorage.active = index;\r\n    }\r\n \r\n    render(){\r\n        \r\n        return (\r\n           <footer>\r\n               {\r\n                   this.state.foots.map((foot,i)=>{\r\n                       return(\r\n                           <div key={i}>\r\n                               <NavLink  className=\"nav-active\" to={foot.path}>\r\n                                        <i className={\"iconfont \" +foot.icon}></i>\r\n                                        <span>{foot.txt}</span>\r\n                                        {i==this.state.foots.length-2&&<Badge \r\n                                        text=\"8\" \r\n                                        className=\"hot\" \r\n                                        hot \r\n                                        style={{ \r\n                                        marginLeft: 12,\r\n                                       // backgroundColor:active==2?\"darkgreen\":\"#999999\"\r\n                                     }} />}\r\n                               </NavLink>    \r\n                           </div>\r\n                       )\r\n                   })\r\n               }\r\n           </footer>\r\n        )\r\n    }\r\n}","import \"./index.scss\";\r\nimport React,{Component} from \"react\";\r\nimport {foots} from \"../foot\"\r\n\r\nimport {\r\n    TabBar\r\n} from \"antd-mobile\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport {history} from \"&\";\r\nimport shopcar from  \"~/mobx/shopcar\"\r\nimport {observer} from \"mobx-react\"\r\n\r\n@observer\r\nclass Afoot extends Component{\r\n    state = {\r\n        selectedTab:\"home\"\r\n    }\r\n\r\n    componentDidMount(){  //刷新高亮\r\n        var hash = window.location.hash;\r\n        console.log(hash)\r\n        var tab = hash.split(\"#/main/\")[1];\r\n        this.setState({\r\n            selectedTab:tab\r\n        })\r\n    }\r\n\r\n    render(){\r\n        console.log(this);\r\n        const{\r\n            carTotal\r\n        }=shopcar;\r\n        return (\r\n            <div className=\"foot\">\r\n                <TabBar\r\n                    unselectedTintColor=\"#949494\"\r\n                    tintColor=\"#33A3F4\"\r\n                    barTintColor=\"white\"\r\n                    \r\n                >\r\n            {\r\n               foots.map((foot,i)=>{\r\n                return (\r\n                        <TabBar.Item\r\n                        title={foot.txt}\r\n                        key={i}\r\n                        icon={<div style={{\r\n                            width: '22px',\r\n                            height: '22px',\r\n                \r\n                            }}\r\n                            className={\"iconfont \"+foot.icon}\r\n                          />\r\n                          }\r\n                          selectedIcon={<div style={{\r\n                            width: '22px',\r\n                            height: '22px',\r\n        \r\n                            }}\r\n                            className={\"iconfont \"+foot.icon}\r\n                          />\r\n                          }\r\n        \r\n                          selected={this.state.selectedTab==foot.name}\r\n                          badge={i==foots.length-2&&carTotal}\r\n                          onPress={() => {\r\n                            this.setState({\r\n                              selectedTab: foot.name,\r\n                            });\r\n                            //this.props.history.push(foot.path);\r\n                            //this.context.history.push(foot.path);\r\n                            history.push(foot.path)\r\n                        }}\r\n                          data-seed=\"logId\"\r\n                          \r\n                        ></TabBar.Item>\r\n                 \r\n                    \r\n                )\r\n               })     \r\n            }\r\n           </TabBar>\r\n           \r\n        </div>\r\n\r\n    )\r\n}\r\n}\r\n\r\nAfoot.contextTypes={\r\n    history:PropTypes.object,\r\n    location:PropTypes.object\r\n}\r\n\r\nexport {Afoot}","import \"./index.scss\"\r\nimport React, {Component} from \"react\"\r\n\r\nimport{\r\n    Switch,\r\n    Route,\r\n    Redirect\r\n} from \"react-router-dom\";\r\n\r\nimport LazyLoad from \"&/lazyload\"\r\nimport {Foot} from \"~/components/foot\"\r\nimport {Afoot} from \"~/components/afoot\"\r\n\r\nexport default class Main extends Component{\r\n    render(){\r\n        console.log(this.props)\r\n        return (\r\n            <div className=\"box\">\r\n                <Switch>\r\n                    <Route path=\"/main/home\" component={LazyLoad(()=>import(\"../home\"))} />\r\n                    <Route path=\"/main/classify\" component={LazyLoad(()=>import(\"../classify\"))} />\r\n                    <Route path=\"/main/cart\" component={LazyLoad(()=>import(\"../cart\"))} />\r\n                    <Route path=\"/main/mine\" component={LazyLoad(()=>import(\"../mine\"))} />\r\n                    <Route render={()=>(<Redirect to=\"/main/home\" />)} />\r\n                </Switch>\r\n                {/* 把父组件的Route通过解构带给Afoot */}\r\n                <Afoot {...this.props} /> \r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","export const msg=\"are you ok !\"\r\n\r\n\r\n\r\n\r\n//构造函数 (构造器+原型对象+静态对象)\r\nexport class People{\r\n    constructor(names,age){\r\n        this.names=names;\r\n        this.age=age;\r\n    }\r\n\r\n    //原型对象\r\n    say(){\r\n\r\n    }\r\n    todo(){\r\n\r\n    }\r\n\r\n}\r\n\r\nPeople.hobby=[\"eat\",\"sleep\"]\r\n\r\nexport class Student extends People{\r\n    constructor(names,age,score){\r\n        super(names,age);\r\n        this.score=score;\r\n    }\r\n    goto(){\r\n\r\n    }\r\n    say(){\r\n        return super.say();\r\n    }\r\n}\r\n\r\nStudent.hobby=[\"read\",\"music\"];\r\n\r\nexport class component{\r\n    constructor(){\r\n        \r\n    }\r\n\r\n    render() {\r\n    \r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n}\r\n\r\n// class App extends React.Component{\r\n    \r\n// }\r\n","import axios from \"axios\";\r\nimport {Toast} from \"antd-mobile\"\r\nimport {history} from \"&\"\r\nconst baseURL = 'http://47.104.79.233:1910/'\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;   // req.headers.token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg,time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time , () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\n// axios  拦截器  Interceptors\r\n// request 请求发送之前的拦截器\r\naxios.interceptors.request.use(function (config) {\r\n\r\n    // 配置动画\r\n    loadingToast();\r\n    \r\n    token =  sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n  }, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n// response 响应 完成 的拦截器\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if(response.data.code==\"3000\"){\r\n       // 跳转 登录 \r\n      history.push(\"/login\");\r\n    }\r\n    // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    if(!!response.data.type){\r\n        success(response.data.msg);\r\n    }else{\r\n        if(response.data.type==0){\r\n            fail(response.data.msg)\r\n        }else{\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n    \r\n\r\n    // 成功的响应\r\n    return response;\r\n  }, function (error) {\r\n    // 失败的响应 \r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport {axios,baseURL}","import url from \"url\";\r\nimport {createHashHistory} from \"history\";\r\n\r\n\r\n\r\nexport {msg} from \"./msg\"\r\n\r\nexport {config} from \"./config\"\r\n\r\n\r\nexport const commonCss={\r\n    all:{\r\n        margin:0,\r\n        padding:0\r\n    },\r\n    three:{\r\n         backgroundColor:\"pink\",\r\n         boxShadow:\"0 0 0 10px blue\" \r\n    }\r\n}\r\n\r\nexport {axios,baseURL} from \"./axios\"\r\nexport const commonJS={\r\n    move(){\r\n        console.log(\"这是 鼠标滑动事件\");\r\n    },\r\n    touch(){\r\n        console.log(\"this is touch event 触摸事件\")\r\n    }\r\n}\r\n\r\n//history=this.props.history\r\nexport const history=new  createHashHistory();"],"sourceRoot":""}